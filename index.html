<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hassan - Complete Islamic Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_KEY&libraries=places"></script>
</head>
<body>
    <!-- Kaaba Background -->
    <div class="kaaba-bg"></div>

    <!-- Language Selection Screen -->
    <div id="language-screen" class="language-screen">
        <div class="language-content">
            <h1 data-translate="languageTitle">üïå Hassan - Islamic Hub</h1>
            <p data-translate="languageSubtitle">Chagua Lugha | Choose Language</p>
            
            <div class="language-buttons">
                <button class="language-btn" onclick="selectLanguage('kiswahili')">
                    <i class="fas fa-globe-africa"></i>
                    <span data-translate="kiswahiliBtn">KISWAHILI</span>
                    <small data-translate="kiswahiliSub">Lugha ya Kiswahili</small>
                </button>
                
                <button class="language-btn" onclick="selectLanguage('english')">
                    <i class="fas fa-language"></i>
                    <span data-translate="englishBtn">ENGLISH</span>
                    <small data-translate="englishSub">English Language</small>
                </button>
            </div>
            
            <div class="language-info">
                <p data-translate="languageInfo1">Chagua lugha unayopendelea kwa mazungumzo yote</p>
                <p data-translate="languageInfo2">Choose your preferred language for all conversations</p>
            </div>
        </div>
    </div>

    <!-- Language Switcher -->
    <div class="language-switcher" id="language-switcher" style="display: none;">
        <button class="lang-btn" id="lang-en-btn" onclick="switchLanguage('english')">EN</button>
        <button class="lang-btn" id="lang-sw-btn" onclick="switchLanguage('kiswahili')">SW</button>
    </div>

    <!-- Welcome Screen -->
    <div id="welcome-screen" class="welcome-screen">
        <div class="welcome-content">
            <h1 id="welcome-title" data-translate="welcomeTitle">üïå Hassan - Islamic Hub</h1>
            <p id="welcome-subtitle" data-translate="welcomeSubtitle">Your personal guide to Islamic knowledge</p>
            
            <form id="user-info-form" class="user-info-form">
                <div class="form-group">
                    <label for="user-name" id="name-label" data-translate="nameLabel">Your Name</label>
                    <input type="text" id="user-name" data-translate-placeholder="namePlaceholder" placeholder="Enter your name" required>
                </div>
                
                <div class="form-group">
                    <label for="user-background" id="background-label" data-translate="backgroundLabel">Your Islamic Background</label>
                    <select id="user-background" required>
                        <option value="" data-translate="selectLevel">Select your level</option>
                        <option value="beginner" data-translate="beginnerOption">Beginner - New to Islam</option>
                        <option value="student" data-translate="studentOption">Student - Learning Islam</option>
                        <option value="practicing" data-translate="practicingOption">Practicing Muslim</option>
                        <option value="advanced" data-translate="advancedOption">Advanced - Seeking deeper knowledge</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="user-interest" id="interest-label" data-translate="interestLabel">Primary Interest</label>
                    <select id="user-interest" required>
                        <option value="" data-translate="selectInterest">Select interest</option>
                        <option value="quran" data-translate="quranOption">Quran & Tafsir</option>
                        <option value="hadith" data-translate="hadithOption">Hadith & Sunnah</option>
                        <option value="fiqh" data-translate="fiqhOption">Fiqh & Jurisprudence</option>
                        <option value="aqeedah" data-translate="aqeedahOption">Aqeedah & Beliefs</option>
                        <option value="seerah" data-translate="seerahOption">Seerah & History</option>
                        <option value="spirituality" data-translate="spiritualityOption">Spirituality & Tasawwuf</option>
                    </select>
                </div>
                
                <button type="button" id="start-chat-btn" class="start-chat-btn" data-translate="startButton">
                    ü§≤ Start Learning - Assalamu Alaikum
                </button>
            </form>
        </div>
    </div>

    <!-- Main App -->
    <div class="app-container">
        <div class="app-header">
            <div class="container">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h3 class="mb-0" data-translate="appTitle">Hassan</h3>
                        <div class="current-date" id="current-date">Loading...</div>
                    </div>
                    <div class="text-end">
                        <div class="hijri-date" id="hijri-date">Loading...</div>
                        <div id="location-display" data-translate="locating">Locating...</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container mt-4">
            <!-- Home Tab -->
            <div class="tab-content active" id="home-tab">
                <!-- Next Prayer Banner -->
                <div class="next-prayer-banner">
                    <div>
                        <div data-translate="nextPrayer">Next Prayer</div>
                        <div class="fw-bold" id="next-prayer-name">Loading...</div>
                    </div>
                    <div class="text-end">
                        <div data-translate="startsIn">Starts in</div>
                        <div class="fw-bold" id="next-prayer-time">--:--</div>
                    </div>
                </div>
                
                <!-- Prayer Times -->
                <div class="prayer-times-container">
                    <div class="row text-center" id="home-prayer-times">
                        <div class="col prayer-time-card" id="fajr-card">
                            <div class="prayer-name" data-translate="fajr">Fajr</div>
                            <div class="prayer-time" id="fajr-time">--:--</div>
                        </div>
                        <div class="col prayer-time-card" id="dhuhr-card">
                            <div class="prayer-name" data-translate="dhuhr">Dhuhr</div>
                            <div class="prayer-time" id="dhuhr-time">--:--</div>
                        </div>
                        <div class="col prayer-time-card" id="asr-card">
                            <div class="prayer-name" data-translate="asr">Asr</div>
                            <div class="prayer-time" id="asr-time">--:--</div>
                        </div>
                        <div class="col prayer-time-card" id="maghrib-card">
                            <div class="prayer-name" data-translate="maghrib">Maghrib</div>
                            <div class="prayer-time" id="maghrib-time">--:--</div>
                        </div>
                        <div class="col prayer-time-card" id="isha-card">
                            <div class="prayer-name" data-translate="isha">Isha</div>
                            <div class="prayer-time" id="isha-time">--:--</div>
                        </div>
                    </div>
                </div>

                <!-- Quick Access Grid -->
                <div class="row">
                    <div class="col-6 mb-3">
                        <div class="feature-card" onclick="switchTab('qibla-tab')">
                            <div class="feature-icon">
                                <i class="fas fa-compass"></i>
                            </div>
                            <div class="feature-title" data-translate="qiblaTitle">Qibla Direction</div>
                            <div class="feature-description" data-translate="qiblaDesc">Find direction to Kaaba</div>
                        </div>
                    </div>
                    <div class="col-6 mb-3">
                        <div class="feature-card" onclick="switchTab('quran-tab')">
                            <div class="feature-icon">
                                <i class="fas fa-book-quran"></i>
                            </div>
                            <div class="feature-title" data-translate="quranTitle">Quran</div>
                            <div class="feature-description" data-translate="quranDesc">Read and listen to Quran</div>
                        </div>
                    </div>
                    <div class="col-6 mb-3">
                        <div class="feature-card" onclick="switchTab('dua-tab')">
                            <div class="feature-icon">
                                <i class="fas fa-hands-praying"></i>
                            </div>
                            <div class="feature-title">Dua Collection</div>
                            <div class="feature-description">Daily supplications & prayers</div>
                        </div>
                    </div>
                    <div class="col-6 mb-3">
                        <div class="feature-card" onclick="switchTab('stories-tab')">
                            <div class="feature-icon">
                                <i class="fas fa-book-open"></i>
                            </div>
                            <div class="feature-title">Islamic Stories</div>
                            <div class="feature-description">Prophets & historical stories</div>
                        </div>
                    </div>
                    <div class="col-6 mb-3">
                        <div class="feature-card" onclick="switchTab('mosque-tab')">
                            <div class="feature-icon">
                                <i class="fas fa-mosque"></i>
                            </div>
                            <div class="feature-title">Mosque Finder</div>
                            <div class="feature-description">Find nearby mosques</div>
                        </div>
                    </div>
                    <div class="col-6 mb-3">
                        <div class="feature-card" onclick="switchTab('wallpapers-tab')">
                            <div class="feature-icon">
                                <i class="fas fa-image"></i>
                            </div>
                            <div class="feature-title">Islamic Wallpapers</div>
                            <div class="feature-description">Beautiful Islamic images</div>
                        </div>
                    </div>
                </div>

                <!-- Verse of the Day -->
                <div class="quran-verse">
                    <h5 class="text-center mb-3" data-translate="verseOfDay">Verse of the Day</h5>
                    <div class="arabic-text" id="daily-verse-arabic">Loading...</div>
                    <div class="translation-text" id="daily-verse-translation">Loading translation...</div>
                    <div class="text-center mt-3">
                        <small id="daily-verse-reference">Surah, Verse</small>
                    </div>
                </div>
            </div>

            <!-- Quran Tab -->
            <div class="tab-content" id="quran-tab">
                <h5 class="section-title" data-translate="quranSection">The Holy Quran</h5>
                
                <input type="text" class="search-box" data-translate-placeholder="searchQuran" placeholder="Search Quran..." id="quran-search">
                <div class="search-results" id="quran-search-results" style="display: none;"></div>
                
                <div class="quran-verse mb-3">
                    <div class="arabic-text" id="quran-display-arabic">ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê</div>
                    <div class="translation-text" id="quran-display-translation">In the name of Allah, the Entirely Merciful, the Especially Merciful.</div>
                    <div class="text-center mt-3">
                        <small id="quran-display-reference">Surah Al-Fatihah, Verse 1</small>
                    </div>
                    
                    <!-- Quran Audio Player -->
                    <div class="audio-controls">
                        <select class="reciter-select" id="reciter-select">
                            <option value="ar.alafasy">Mishary Rashid Alafasy</option>
                            <option value="ar.abdulbasit">Abdul Basit Abdul Samad</option>
                            <option value="ar.husary">Mahmoud Khalil Al-Husary</option>
                            <option value="ar.minshawi">Mohamed Siddiq Al-Minshawi</option>
                        </select>
                        <button class="audio-btn" onclick="playCurrentVerse()">
                            <i class="fas fa-play" id="play-icon"></i>
                        </button>
                        <audio id="quran-audio" onended="onAudioEnded()"></audio>
                    </div>
                </div>
                
                <div class="d-flex justify-content-between mb-3">
                    <button class="btn btn-outline-primary" onclick="previousVerse()">
                        <i class="fas fa-chevron-left"></i> <span data-translate="previous">Previous</span>
                    </button>
                    <button class="btn btn-outline-primary" onclick="randomVerse()">
                        <i class="fas fa-random"></i> <span data-translate="random">Random</span>
                    </button>
                    <button class="btn btn-outline-primary" onclick="nextVerse()">
                        <span data-translate="next">Next</span> <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                
                <h6 class="mt-4 mb-3" data-translate="surahs">Surahs</h6>
                <div id="surah-list">
                    <!-- Surah list will be populated here -->
                </div>
            </div>

            <!-- Dua Collection Tab -->
            <div class="tab-content" id="dua-tab">
                <h5 class="section-title">Dua Collection</h5>
                
                <div class="search-box-container">
                    <input type="text" class="search-box" placeholder="Search duas..." id="dua-search">
                </div>

                <div class="category-buttons">
                    <button class="category-btn active" onclick="filterDuas('all')">All</button>
                    <button class="category-btn" onclick="filterDuas('morning')">Morning</button>
                    <button class="category-btn" onclick="filterDuas('evening')">Evening</button>
                    <button class="category-btn" onclick="filterDuas('prayer')">Prayer</button>
                    <button class="category-btn" onclick="filterDuas('protection')">Protection</button>
                    <button class="category-btn" onclick="filterDuas('healing')">Healing</button>
                </div>

                <div class="dua-list" id="dua-list">
                    <!-- Duas will be loaded here -->
                </div>
            </div>

            <!-- Islamic Stories Tab -->
            <div class="tab-content" id="stories-tab">
                <h5 class="section-title">Islamic Stories</h5>
                
                <div class="stories-categories">
                    <button class="story-category-btn active" onclick="loadStories('prophets')">Prophets</button>
                    <button class="story-category-btn" onclick="loadStories('sahaba')">Sahaba</button>
                    <button class="story-category-btn" onclick="loadStories('miracles')">Miracles</button>
                    <button class="story-category-btn" onclick="loadStories('historical')">Historical</button>
                </div>

                <div class="stories-grid" id="stories-grid">
                    <!-- Stories will be loaded here -->
                </div>
            </div>

            <!-- Mosque Finder Tab -->
            <div class="tab-content" id="mosque-tab">
                <h5 class="section-title">Mosque Finder</h5>
                
                <div class="search-box-container">
                    <input type="text" class="search-box" placeholder="Search for mosques..." id="mosque-search">
                    <button class="btn btn-primary" onclick="findNearbyMosques()">
                        <i class="fas fa-search"></i> Search
                    </button>
                </div>

                <div class="map-container">
                    <div id="mosque-map"></div>
                </div>

                <div class="mosque-list" id="mosque-list">
                    <!-- Mosque results will be displayed here -->
                </div>
            </div>

            <!-- More tabs for other features... -->

            <!-- Enhanced Chatbot Tab -->
            <div class="tab-content" id="chatbot-tab">
                <h5 class="section-title" data-translate="aiScholar">Islamic Scholar AI</h5>
                
                <!-- Mode Toggle -->
                <div class="mode-toggle" id="mode-toggle" style="display: none;">
                    <button class="mode-btn active" id="online-mode-btn" data-translate="onlineMode">Online Mode</button>
                    <button class="mode-btn" id="offline-mode-btn" data-translate="offlineMode">Offline Mode</button>
                </div>
                
                <!-- Offline Indicator -->
                <div class="offline-indicator" id="offline-indicator" style="display: none;">
                    <span class="offline-badge">OFFLINE</span>
                    <span data-translate="offlineMessage">You're using offline mode with pre-loaded Islamic knowledge</span>
                </div>
                
                <!-- Islamic Tools -->
                <div class="islamic-tools">
                    <button class="tool-btn" onclick="askQuickQuestion('pillars')">
                        <i class="fas fa-mosque"></i> <span data-translate="fivePillars">Five Pillars</span>
                    </button>
                    <button class="tool-btn" onclick="askQuickQuestion('wudu')">
                        <i class="fas fa-hands"></i> <span data-translate="wuduSteps">Wudu Steps</span>
                    </button>
                    <button class="tool-btn" onclick="askQuickQuestion('ramadan')">
                        <i class="fas fa-moon"></i> <span data-translate="ramadan">Ramadan</span>
                    </button>
                    <button class="tool-btn" onclick="askQuickQuestion('zakat')">
                        <i class="fas fa-hand-holding-usd"></i> <span data-translate="zakat">Zakat</span>
                    </button>
                    <button class="tool-btn" onclick="askQuickQuestion('kindness')">
                        <i class="fas fa-heart"></i> <span data-translate="kindnessHadith">Kindness Hadith</span>
                    </button>
                </div>
                
                <div class="chat-container">
                    <div class="chat-messages" id="chat-messages">
                        <div class="chat-message bot-message">
                            <p data-translate="welcomeChat">As-salamu alaykum! I'm your Islamic Scholar AI assistant. Please select your language to begin.</p>
                        </div>
                    </div>
                    
                    <div class="chat-input-container">
                        <input type="text" class="chat-input" id="chat-input" data-translate-placeholder="chatPlaceholder" placeholder="Please select language first..." disabled>
                        <button class="send-button" onclick="sendChatMessage()" id="send-button" disabled>
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <a href="#" class="nav-item active" data-tab="home-tab">
            <div class="nav-icon"><i class="fas fa-home"></i></div>
            <div data-translate="home">Home</div>
        </a>
        <a href="#" class="nav-item" data-tab="quran-tab">
            <div class="nav-icon"><i class="fas fa-book-quran"></i></div>
            <div data-translate="quran">Quran</div>
        </a>
        <a href="#" class="nav-item" data-tab="dua-tab">
            <div class="nav-icon"><i class="fas fa-hands-praying"></i></div>
            <div>Dua</div>
        </a>
        <a href="#" class="nav-item" data-tab="stories-tab">
            <div class="nav-icon"><i class="fas fa-book-open"></i></div>
            <div>Stories</div>
        </a>
        <a href="#" class="nav-item" data-tab="chatbot-tab">
            <div class="nav-icon"><i class="fas fa-robot"></i></div>
            <div data-translate="aiScholarNav">AI Scholar</div>
        </a>
    </div>

    <!-- Modals and other components -->
    <div class="modal fade" id="surahModal" tabindex="-1" aria-labelledby="surahModalLabel" aria-hidden="true">
        <!-- Modal content -->
    </div>

    <div class="modal fade" id="storyModal" tabindex="-1" aria-labelledby="storyModalLabel" aria-hidden="true">
        <!-- Story modal content -->
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
