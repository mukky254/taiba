<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hassan - Complete Islamic Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Kaaba Background -->
    <div class="kaaba-bg"></div>

    <!-- Language Selection Screen -->
    <div id="language-screen" class="language-screen">
        <div class="language-content">
            <h1 data-translate="languageTitle">üïå Hassan - Islamic Hub</h1>
            <p data-translate="languageSubtitle">Chagua Lugha | Choose Language</p>
            
            <div class="language-buttons">
                <button class="language-btn" onclick="selectLanguage('kiswahili')">
                    <i class="fas fa-globe-africa"></i>
                    <span data-translate="kiswahiliBtn">KISWAHILI</span>
                    <small data-translate="kiswahiliSub">Lugha ya Kiswahili</small>
                </button>
                
                <button class="language-btn" onclick="selectLanguage('english')">
                    <i class="fas fa-language"></i>
                    <span data-translate="englishBtn">ENGLISH</span>
                    <small data-translate="englishSub">English Language</small>
                </button>
            </div>
            
            <div class="language-info">
                <p data-translate="languageInfo1">Chagua lugha unayopendelea kwa mazungumzo yote</p>
                <p data-translate="languageInfo2">Choose your preferred language for all conversations</p>
            </div>
        </div>
    </div>

    <!-- Language Switcher (visible after language selection) -->
    <div class="language-switcher" id="language-switcher" style="display: none;">
        <button class="lang-btn" id="lang-en-btn" onclick="switchLanguage('english')">EN</button>
        <button class="lang-btn" id="lang-sw-btn" onclick="switchLanguage('kiswahili')">SW</button>
    </div>

    <!-- Welcome Screen -->
    <div id="welcome-screen" class="welcome-screen">
        <div class="welcome-content">
            <h1 id="welcome-title" data-translate="welcomeTitle">üïå Hassan - Islamic Hub</h1>
            <p id="welcome-subtitle" data-translate="welcomeSubtitle">Your personal guide to Islamic knowledge</p>
            
            <form id="user-info-form" class="user-info-form">
                <div class="form-group">
                    <label for="user-name" id="name-label" data-translate="nameLabel">Your Name</label>
                    <input type="text" id="user-name" data-translate-placeholder="namePlaceholder" placeholder="Enter your name" required>
                </div>
                
                <div class="form-group">
                    <label for="user-background" id="background-label" data-translate="backgroundLabel">Your Islamic Background</label>
                    <select id="user-background" required>
                        <option value="" data-translate="selectLevel">Select your level</option>
                        <option value="beginner" data-translate="beginnerOption">Beginner - New to Islam</option>
                        <option value="student" data-translate="studentOption">Student - Learning Islam</option>
                        <option value="practicing" data-translate="practicingOption">Practicing Muslim</option>
                        <option value="advanced" data-translate="advancedOption">Advanced - Seeking deeper knowledge</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="user-interest" id="interest-label" data-translate="interestLabel">Primary Interest</label>
                    <select id="user-interest" required>
                        <option value="" data-translate="selectInterest">Select interest</option>
                        <option value="quran" data-translate="quranOption">Quran & Tafsir</option>
                        <option value="hadith" data-translate="hadithOption">Hadith & Sunnah</option>
                        <option value="fiqh" data-translate="fiqhOption">Fiqh & Jurisprudence</option>
                        <option value="aqeedah" data-translate="aqeedahOption">Aqeedah & Beliefs</option>
                        <option value="seerah" data-translate="seerahOption">Seerah & History</option>
                        <option value="spirituality" data-translate="spiritualityOption">Spirituality & Tasawwuf</option>
                    </select>
                </div>
                
                <button type="button" id="start-chat-btn" class="start-chat-btn" data-translate="startButton">
                    ü§≤ Start Learning - Assalamu Alaikum
                </button>
            </form>
        </div>
    </div>

    <div class="app-header">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h3 class="mb-0" data-translate="appTitle">Hassan</h3>
                    <div class="current-date" id="current-date">Loading...</div>
                </div>
                <div class="text-end">
                    <div class="hijri-date" id="hijri-date">Loading...</div>
                    <div id="location-display" data-translate="locating">Locating...</div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-4">
        <!-- Home Tab -->
        <div class="tab-content active" id="home-tab">
            <div class="next-prayer-banner">
                <div>
                    <div data-translate="nextPrayer">Next Prayer</div>
                    <div class="fw-bold" id="next-prayer-name">Loading...</div>
                </div>
                <div class="text-end">
                    <div data-translate="startsIn">Starts in</div>
                    <div class="fw-bold" id="next-prayer-time">--:--</div>
                </div>
            </div>
            
            <div class="prayer-times-container">
                <div class="row text-center" id="home-prayer-times">
                    <div class="col prayer-time-card" id="fajr-card">
                        <div class="prayer-name" data-translate="fajr">Fajr</div>
                        <div class="prayer-time" id="fajr-time">--:--</div>
                    </div>
                    <div class="col prayer-time-card" id="dhuhr-card">
                        <div class="prayer-name" data-translate="dhuhr">Dhuhr</div>
                        <div class="prayer-time" id="dhuhr-time">--:--</div>
                    </div>
                    <div class="col prayer-time-card" id="asr-card">
                        <div class="prayer-name" data-translate="asr">Asr</div>
                        <div class="prayer-time" id="asr-time">--:--</div>
                    </div>
                    <div class="col prayer-time-card" id="maghrib-card">
                        <div class="prayer-name" data-translate="maghrib">Maghrib</div>
                        <div class="prayer-time" id="maghrib-time">--:--</div>
                    </div>
                    <div class="col prayer-time-card" id="isha-card">
                        <div class="prayer-name" data-translate="isha">Isha</div>
                        <div class="prayer-time" id="isha-time">--:--</div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-6 mb-3">
                    <div class="feature-card" onclick="switchTab('qibla-tab')">
                        <div class="feature-icon">
                            <i class="fas fa-compass"></i>
                        </div>
                        <div class="feature-title" data-translate="qiblaTitle">Qibla Direction</div>
                        <div class="feature-description" data-translate="qiblaDesc">Find direction to Kaaba</div>
                    </div>
                </div>
                <div class="col-6 mb-3">
                    <div class="feature-card" onclick="switchTab('quran-tab')">
                        <div class="feature-icon">
                            <i class="fas fa-book-quran"></i>
                        </div>
                        <div class="feature-title" data-translate="quranTitle">Quran</div>
                        <div class="feature-description" data-translate="quranDesc">Read and listen to Quran</div>
                    </div>
                </div>
                <div class="col-6 mb-3">
                    <div class="feature-card" onclick="switchTab('tasbih-tab')">
                        <div class="feature-icon">
                            <i class="fas fa-hands"></i>
                        </div>
                        <div class="feature-title" data-translate="tasbihTitle">Tasbih Counter</div>
                        <div class="feature-description" data-translate="tasbihDesc">Digital dhikr counter</div>
                    </div>
                </div>
                <div class="col-6 mb-3">
                    <div class="feature-card" onclick="switchTab('hadith-tab')">
                        <div class="feature-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="feature-title" data-translate="hadithTitle">Hadith Collection</div>
                        <div class="feature-description" data-translate="hadithDesc">Sahih Muslim & other hadiths</div>
                    </div>
                </div>
            </div>
            
            <div class="quran-verse">
                <h5 class="text-center mb-3" data-translate="verseOfDay">Verse of the Day</h5>
                <div class="arabic-text" id="daily-verse-arabic">Loading...</div>
                <div class="translation-text" id="daily-verse-translation">Loading translation...</div>
                <div class="text-center mt-3">
                    <small id="daily-verse-reference">Surah, Verse</small>
                </div>
            </div>
        </div>
        
        <!-- Quran Tab -->
        <div class="tab-content" id="quran-tab">
            <h5 class="section-title" data-translate="quranSection">The Holy Quran</h5>
            
            <input type="text" class="search-box" data-translate-placeholder="searchQuran" placeholder="Search Quran..." id="quran-search">
            <div class="search-results" id="quran-search-results" style="display: none;"></div>
            
            <div class="quran-verse mb-3">
                <div class="arabic-text" id="quran-display-arabic">ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸéŸëŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸ∞ŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê</div>
                <div class="translation-text" id="quran-display-translation">In the name of Allah, the Entirely Merciful, the Especially Merciful.</div>
                <div class="text-center mt-3">
                    <small id="quran-display-reference">Surah Al-Fatihah, Verse 1</small>
                </div>
                
                <!-- Quran Audio Player -->
                <div class="audio-controls">
                    <select class="reciter-select" id="reciter-select">
                        <option value="ar.alafasy">Mishary Rashid Alafasy</option>
                        <option value="ar.abdulbasit">Abdul Basit Abdul Samad</option>
                        <option value="ar.husary">Mahmoud Khalil Al-Husary</option>
                        <option value="ar.minshawi">Mohamed Siddiq Al-Minshawi</option>
                    </select>
                    <button class="audio-btn" onclick="playCurrentVerse()">
                        <i class="fas fa-play" id="play-icon"></i>
                    </button>
                    <audio id="quran-audio" onended="onAudioEnded()"></audio>
                </div>
            </div>
            
            <div class="d-flex justify-content-between mb-3">
                <button class="btn btn-outline-primary" onclick="previousVerse()">
                    <i class="fas fa-chevron-left"></i> <span data-translate="previous">Previous</span>
                </button>
                <button class="btn btn-outline-primary" onclick="randomVerse()">
                    <i class="fas fa-random"></i> <span data-translate="random">Random</span>
                </button>
                <button class="btn btn-outline-primary" onclick="nextVerse()">
                    <span data-translate="next">Next</span> <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            
            <h6 class="mt-4 mb-3" data-translate="surahs">Surahs</h6>
            <div id="surah-list">
                <!-- Surah list will be populated here -->
            </div>
        </div>
        
        <!-- Prayer & Qibla Tab -->
        <div class="tab-content" id="qibla-tab">
            <h5 class="section-title" data-translate="prayerQiblaSection">Prayer & Qibla</h5>
            
            <div class="text-center">
                <div class="qibla-compass">
                    <div class="qibla-arrow" id="qibla-arrow"></div>
                    <div class="compass-direction compass-n">N</div>
                    <div class="compass-direction compass-s">S</div>
                    <div class="compass-direction compass-w">W</div>
                    <div class="compass-direction compass-e">E</div>
                </div>
                <p class="mt-3" data-translate="qiblaDirection">Qibla Direction: <span id="qibla-degrees" class="fw-bold">--</span>¬∞</p>
                <button class="btn btn-primary" onclick="recalibrateQibla()">
                    <i class="fas fa-sync-alt"></i> <span data-translate="recalibrate">Recalibrate</span>
                </button>
            </div>
            
            <div class="mt-4">
                <h6 data-translate="prayerTimesToday">Prayer Times Today</h6>
                <div class="prayer-times-container">
                    <div class="row">
                        <div class="col-6 mb-2" data-translate="fajr">Fajr</div>
                        <div class="col-6 mb-2 text-end" id="prayer-fajr">--:--</div>
                        <div class="col-6 mb-2" data-translate="sunrise">Sunrise</div>
                        <div class="col-6 mb-2 text-end" id="prayer-sunrise">--:--</div>
                        <div class="col-6 mb-2" data-translate="dhuhr">Dhuhr</div>
                        <div class="col-6 mb-2 text-end" id="prayer-dhuhr">--:--</div>
                        <div class="col-6 mb-2" data-translate="asr">Asr</div>
                        <div class="col-6 mb-2 text-end" id="prayer-asr">--:--</div>
                        <div class="col-6 mb-2" data-translate="maghrib">Maghrib</div>
                        <div class="col-6 mb-2 text-end" id="prayer-maghrib">--:--</div>
                        <div class="col-6 mb-2" data-translate="isha">Isha</div>
                        <div class="col-6 mb-2 text-end" id="prayer-isha">--:--</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Tasbih Counter Tab -->
        <div class="tab-content" id="tasbih-tab">
            <h5 class="section-title" data-translate="tasbihSection">Digital Tasbih</h5>
            
            <div class="feature-card">
                <div class="dhikr-counter">
                    <div class="counter-display" id="dhikr-counter">0</div>
                    <div class="mb-3">
                        <select class="form-select form-select-sm" id="dhikr-type" onchange="resetDhikr()">
                            <option value="33" data-name="SubhanAllah" data-translate="subhanallah">SubhanAllah (33x)</option>
                            <option value="33" data-name="Alhamdulillah" data-translate="alhamdulillah">Alhamdulillah (33x)</option>
                            <option value="33" data-name="Allahu Akbar" data-translate="allahuAkbar">Allahu Akbar (33x)</option>
                            <option value="100" data-name="La ilaha illa Allah" data-translate="laIlaha">La ilaha illa Allah (100x)</option>
                        </select>
                    </div>
                    <button class="counter-btn" onclick="incrementDhikr()">
                        <i class="fas fa-plus"></i>
                    </button>
                    <div class="mt-3">
                        <button class="btn btn-outline-secondary" onclick="resetDhikr()" data-translate="reset">Reset</button>
                    </div>
                </div>
            </div>
            
            <!-- Islamic Calendar -->
            <div class="feature-card mt-4">
                <h6 class="text-center" data-translate="islamicCalendar">Islamic Calendar</h6>
                <div class="text-center mb-3" id="hijri-month">Loading...</div>
                <div class="islamic-calendar" id="islamic-calendar">
                    <!-- Calendar will be populated here -->
                </div>
            </div>
            
            <!-- 99 Names -->
            <div class="feature-card mt-4">
                <h6 class="text-center" data-translate="allahNames">99 Names of Allah</h6>
                <div class="text-center my-3">
                    <div class="arabic-text" id="allah-name-arabic">ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸÜŸè</div>
                    <div class="fw-bold mt-2" id="allah-name-english">Ar-Rahman</div>
                    <div class="text-muted" id="allah-name-meaning">The Beneficent</div>
                </div>
                <button class="btn btn-primary w-100" onclick="nextAllahName()" data-translate="nextName">Next Name</button>
            </div>
        </div>
        
        <!-- Hadith Tab -->
        <div class="tab-content" id="hadith-tab">
            <h5 class="section-title" data-translate="hadithSection">Hadith Collection</h5>
            
            <div class="hadith-collection-selector">
                <button class="collection-btn active" data-collection="bukhari" data-translate="bukhari">Sahih Bukhari</button>
                <button class="collection-btn" data-collection="muslim" data-translate="muslim">Sahih Muslim</button>
                <button class="collection-btn" data-collection="abudawud" data-translate="abudawud">Sunan Abi Dawud</button>
                <button class="collection-btn" data-collection="tirmidhi" data-translate="tirmidhi">Jami` at-Tirmidhi</button>
                <button class="collection-btn" data-collection="nasai" data-translate="nasai">Sunan an-Nasa'i</button>
                <button class="collection-btn" data-collection="ibnmajah" data-translate="ibnmajah">Sunan Ibn Majah</button>
            </div>
            
            <div class="hadith-search-container">
                <input type="text" class="hadith-search-input" id="hadith-search" data-translate-placeholder="searchHadith" placeholder="Search hadiths...">
                <button class="btn btn-primary" onclick="searchHadiths()">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            
            <div id="hadith-books-list">
                <!-- Hadith books will be populated here -->
            </div>
            
            <div id="hadith-results" class="mt-4">
                <!-- Hadith search results will be displayed here -->
            </div>
        </div>
        
        <!-- Enhanced Chatbot Tab -->
        <div class="tab-content" id="chatbot-tab">
            <h5 class="section-title" data-translate="aiScholar">Islamic Scholar AI</h5>
            
            <!-- Mode Toggle -->
            <div class="mode-toggle" id="mode-toggle" style="display: none;">
                <button class="mode-btn active" id="online-mode-btn" data-translate="onlineMode">Online Mode</button>
                <button class="mode-btn" id="offline-mode-btn" data-translate="offlineMode">Offline Mode</button>
            </div>
            
            <!-- Offline Indicator -->
            <div class="offline-indicator" id="offline-indicator" style="display: none;">
                <span class="offline-badge">OFFLINE</span>
                <span data-translate="offlineMessage">You're using offline mode with pre-loaded Islamic knowledge</span>
            </div>
            
            <!-- Islamic Tools -->
            <div class="islamic-tools">
                <button class="tool-btn" onclick="askQuickQuestion('pillars')">
                    <i class="fas fa-mosque"></i> <span data-translate="fivePillars">Five Pillars</span>
                </button>
                <button class="tool-btn" onclick="askQuickQuestion('wudu')">
                    <i class="fas fa-hands"></i> <span data-translate="wuduSteps">Wudu Steps</span>
                </button>
                <button class="tool-btn" onclick="askQuickQuestion('ramadan')">
                    <i class="fas fa-moon"></i> <span data-translate="ramadan">Ramadan</span>
                </button>
                <button class="tool-btn" onclick="askQuickQuestion('zakat')">
                    <i class="fas fa-hand-holding-usd"></i> <span data-translate="zakat">Zakat</span>
                </button>
                <button class="tool-btn" onclick="askQuickQuestion('kindness')">
                    <i class="fas fa-heart"></i> <span data-translate="kindnessHadith">Kindness Hadith</span>
                </button>
            </div>
            
            <div class="chat-container">
                <div class="chat-messages" id="chat-messages">
                    <div class="chat-message bot-message">
                        <p data-translate="welcomeChat">As-salamu alaykum! I'm your Islamic Scholar AI assistant. Please select your language to begin.</p>
                    </div>
                </div>
                
                <div class="chat-input-container">
                    <input type="text" class="chat-input" id="chat-input" data-translate-placeholder="chatPlaceholder" placeholder="Please select language first..." disabled>
                    <button class="send-button" onclick="sendChatMessage()" id="send-button" disabled>
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <a href="#" class="nav-item active" data-tab="home-tab">
            <div class="nav-icon"><i class="fas fa-home"></i></div>
            <div data-translate="home">Home</div>
        </a>
        <a href="#" class="nav-item" data-tab="quran-tab">
            <div class="nav-icon"><i class="fas fa-book-quran"></i></div>
            <div data-translate="quran">Quran</div>
        </a>
        <a href="#" class="nav-item" data-tab="qibla-tab">
            <div class="nav-icon"><i class="fas fa-compass"></i></div>
            <div data-translate="prayer">Prayer</div>
        </a>
        <a href="#" class="nav-item" data-tab="hadith-tab">
            <div class="nav-icon"><i class="fas fa-book"></i></div>
            <div data-translate="hadith">Hadith</div>
        </a>
        <a href="#" class="nav-item" data-tab="chatbot-tab">
            <div class="nav-icon"><i class="fas fa-robot"></i></div>
            <div data-translate="aiScholarNav">AI Scholar</div>
        </a>
    </div>

    <!-- Full Surah Modal -->
    <div class="modal fade" id="surahModal" tabindex="-1" aria-labelledby="surahModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content" style="background-color: var(--dark-bg); color: var(--text-light);">
                <div class="modal-header" style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <h5 class="modal-title" data-translate="surahDetails">Surah Details</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="surah-header" id="surah-modal-header">
                        <h3 id="surah-modal-name">Surah Name</h3>
                        <p id="surah-modal-details">Details</p>
                    </div>
                    <div class="surah-content" id="surah-modal-content">
                        <!-- Surah verses will be loaded here -->
                    </div>
                </div>
                <div class="modal-footer" style="border-top: 1px solid rgba(255,255,255,0.1);">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-translate="close">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Hadith Details Modal -->
    <div class="modal fade" id="hadithModal" tabindex="-1" aria-labelledby="hadithModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-scrollable">
            <div class="modal-content" style="background-color: var(--dark-bg); color: var(--text-light);">
                <div class="modal-header" style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <h5 class="modal-title" data-translate="hadithDetails">Hadith Details</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="hadith-modal-content">
                        <!-- Hadith details will be loaded here -->
                    </div>
                </div>
                <div class="modal-footer" style="border-top: 1px solid rgba(255,255,255,0.1);">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" data-translate="close">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
    
</body>
</html>
